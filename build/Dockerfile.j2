FROM registry.access.redhat.com/ubi8/python-39

# Switch to root user for package installation
USER root

# Install required packages
ENV PYTHON_VERSION="3.11"
RUN yum -y update && \
    yum -y install openssl python3 python3-pip && \
    yum clean all

# Switch back to the default user for security
USER 1001

# Set the working directory
WORKDIR /app

# Copy application files
COPY . /app

# Install dependencies
RUN pip install --no-cache-dir -r requirements.txt

# Expose the application port
EXPOSE 5000

# Default command
CMD ["python", "app.py"]
